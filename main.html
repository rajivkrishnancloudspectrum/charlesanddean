<!DOCTYPE html>
<html>
<head>
    <title>Charles & Dean Finance Assistant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body{
            margin:0;
            height:100vh;
            font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
            background:#f3f4f6;
            display:flex;
            align-items:center;
            justify-content:center;
        }

        #chat-container{
            width:720px;
            max-width:90%;
            text-align:center;
        }

        .title{
            font-size:34px;
            font-weight:600;
            color:#0d1b2a;
            margin-bottom:10px;
        }

        .subtitle{
            color:#6b7280;
            margin-bottom:30px;
            font-size:16px;
        }

        .input-wrapper{
            display:flex;
            background:white;
            border-radius:14px;
            box-shadow:0 10px 25px rgba(0,0,0,0.1);
            padding:8px;
            align-items:center;
        }

        .chat-input{
            flex:1;
            border:none;
            outline:none;
            font-size:16px;
            padding:14px;
            border-radius:12px;
        }

        .send-btn{
            background:#0d1b2a;
            color:white;
            border:none;
            padding:12px 20px;
            border-radius:10px;
            cursor:pointer;
            font-weight:600;
        }

        .quick-options{
            margin-top:28px;
            display:flex;
            flex-wrap:wrap;
            gap:12px;
            justify-content:center;
        }

        .quick-btn{
            padding:10px 16px;
            border-radius:22px;
            border:1px solid #d1d5db;
            background:white;
            cursor:pointer;
            transition:0.2s;
        }

        .quick-btn:hover{
            background:#0d1b2a;
            color:white;
            border-color:#0d1b2a;
        }

        /* ðŸ”¥ REAL FULLSCREEN FIX FOR SALESFORCE EMBEDDED MESSAGING */
        .embeddedMessagingFrame,
        .embeddedMessagingFrame .embeddedMessagingConversationButtonWrapper,
        .embeddedMessagingFrame iframe {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            max-width: 100vw !important;
            max-height: 100vh !important;
            border-radius: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        /* remove Salesforce shadow */
        .embeddedMessagingFrame *{
            box-shadow:none !important;
        }
    </style>
</head>

<body>

<div id="chat-container">
    <div class="title">Charles & Dean Finance Assistant</div>
    <div class="subtitle">Ask anything about vehicle finance, eligibility or applications</div>

    <div class="input-wrapper">
        <input type="text" id="chatInput" class="chat-input"
               placeholder="Ask about vehicle finance..." />
        <button id="sendBtn" class="send-btn">Send</button>
    </div>

    <div class="quick-options">
        <button id="orderButton" class="quick-btn">Need vehicle finance help</button>
        <button id="caseButton" class="quick-btn">Check my eligibility</button>
        <button class="quick-btn" onclick="launchChat('Help me choose the right vehicle finance option')">
            Help me choose a plan
        </button>
        <button class="quick-btn" onclick="launchChat('I want to apply for vehicle finance')">
            Start application
        </button>
    </div>
</div>

<script>
function showHome(){
    document.getElementById('chat-container').style.display='block';
}

function hideHome(){
    document.getElementById('chat-container').style.display='none';
}

function initEmbeddedMessaging(){
    try{
        embeddedservice_bootstrap.settings.language='en_US';
        embeddedservice_bootstrap.settings.hideChatButtonOnLoad=true;

        window.addEventListener("onEmbeddedMessagingConversationOpened", hideHome);
        window.addEventListener("onEmbeddedMessagingWindowClosed", showHome);
        window.addEventListener("onEmbeddedMessagingWindowMinimized", showHome);

        embeddedservice_bootstrap.init(
            '00DTA00000B1e6j',
            'Web_AI_Agent',
            'https://charlesdean--partialcop.sandbox.my.site.com/ESWWebAIAgent1762338692563',
            { scrt2URL:'https://charlesdean--partialcop.sandbox.my.salesforce-scrt.com' }
        );
    }catch(err){
        console.error(err);
    }
}

function launchChat(message){
    embeddedservice_bootstrap.utilAPI.launchChat()
        .then(()=>{
            if(message){
                setTimeout(()=>{
                    embeddedservice_bootstrap.utilAPI.sendTextMessage(message);
                },2000);
            }
        });
}

document.addEventListener('DOMContentLoaded',()=>{
    const sendBtn=document.getElementById('sendBtn');
    const chatInput=document.getElementById('chatInput');

    sendBtn.addEventListener('click',()=>{
        const msg=chatInput.value.trim();
        if(msg){
            chatInput.value="";
            launchChat(msg);
        }
    });

    chatInput.addEventListener("keypress",(e)=>{
        if(e.key==="Enter") sendBtn.click();
    });
});
</script>

<script src='https://charlesdean--partialcop.sandbox.my.site.com/ESWWebAIAgent1762338692563/assets/js/bootstrap.min.js'
        onload='initEmbeddedMessaging()'></script>

</body>
</html>
